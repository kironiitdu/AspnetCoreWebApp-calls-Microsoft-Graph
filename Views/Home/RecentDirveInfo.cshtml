@using Newtonsoft.Json.Linq
@using _2_1_Call_MSGraph.Models
@{
    ViewData["Title"] = "RecentDirveInfo";
}

<table class="table-bordered ">
    <tr>
        <th>Folders</th>
        <th>Create New Folder</th>
        <th>Upload</th>
        <th>Shared</th>
    </tr>
    <tr>
        <td>Personal</td>
        <td>
            <button type="button" data-target="#modalSubscriptionForm" id="createFolder" data-toggle="modal">Create New Folder</button>

        </td>
        <td>
            <input class="up" type="file" name="postedFile" />
            <input type="submit" value="Upload" />
        </td>
        <td></td>
    </tr>


</table>
<br />
@{
    var message = ViewData["message"];
    <h3>@message</h3>

}
<h3>@ViewBag.message </h3>
<table class="table-bordered ">

    @{
        //as Microsoft.Graph.Drive
        var driveInfo = (List<DriveInfo>)ViewData["driveInfo"];
        foreach (var item in driveInfo)
        {

            <tr>

                <td><strong>Serial No</strong></td>
                <td><strong> @item.SerialNo</strong></td>
            </tr>
            <tr>

                <td>Drive Id</td>
                <td> @item.DriveId</td>
            </tr>
            <tr>

                <td>Folder Id</td>
                <td> @item.FolderId</td>
            </tr>
            <tr>
                <td>Drive name</td>
                <td>@item.FolderName </td>
            </tr>
            <tr>
                <td>Created Date</td>
                <td>@item.CreatedDateTime</td>
            </tr>
            <tr>
                <td>Created By</td>
                <td>@item.UserDisplayName</td>
            </tr>
            <tr>
                <td>Drive URL</td>
                <td><a href="@item.WebUrl" target="_blank">@item.WebUrl</a></td>
            </tr>
            <tr>
                <td>Last Modified Time</td>
                <td>@item.LastModifiedDateTime</td>
            </tr>
            @*<tr>
                @using (Html.BeginForm("UploadFileOnFolder", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    <td>
                        <input class="up" hidden name="folderName" value=" @item.FolderName" />
                        <input class="up" id="uploadedFile" type="file" name="uploadedFile" multiple />
                    </td>
                    <td>
                        <input type="submit" value="Upload" />
                    </td>
                }



            </tr>*@
            
            <tr>
                <td><hr /></td>
                <td><hr /></td>
            </tr>

        }

    }
</table>
@*For File Upload*@


@using (Html.BeginForm("CreateFolderOnDrive", "Home", FormMethod.Post))
{
    <div class="modal fade" id="modalSubscriptionForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title"></h4>
                </div>
                <div class="modal-body">
                    <label>Folder Name</label>  <input type="text" name="folderName" placeholder="Enter Folder Name"> <input type="submit" value="Create Folder" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
}